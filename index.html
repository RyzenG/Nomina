<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculadora de Jornadas</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>Calculadora de Recargos y Horas Extra</h1>
    <p>Registre múltiples jornadas laborales para obtener el desglose de horas con recargo nocturno, extras diurnas, extras dominicales/festivas y extras nocturnas.</p>
  </header>

  <main>
    <section class="form-section" aria-labelledby="form-title">
      <h2 id="form-title">Registrar jornada</h2>
      <form id="shift-form" novalidate>
        <div class="field">
          <label for="person">Persona</label>
          <input type="text" id="person" name="person" required />
        </div>
        <div class="field">
          <label for="start">Inicio de la jornada</label>
          <input type="datetime-local" id="start" name="start" required />
        </div>
        <div class="field">
          <label for="end">Fin de la jornada</label>
          <input type="datetime-local" id="end" name="end" required />
        </div>
        <div class="field">
          <label for="week">Semana (opcional)</label>
          <input type="week" id="week" name="week" />
          <p class="hint">Si se omite, se calculará la semana ISO a partir de la fecha de inicio.</p>
        </div>
        <div class="field">
          <label for="day-type">Tipo de día</label>
          <select id="day-type" name="day-type" required>
            <option value="auto" selected>Automático según calendario</option>
            <option value="ordinario">Ordinario</option>
            <option value="dominical">Dominical</option>
            <option value="festivo">Festivo</option>
          </select>
        </div>
        <div class="field">
          <label for="rest">Minutos de descanso</label>
          <input type="number" id="rest" name="rest" min="0" max="480" value="0" />
          <p class="hint">
            Indique la duración total del descanso. Si es mayor que cero, también debe
            señalar cuándo inicia (y opcionalmente cuándo termina) la pausa dentro de la
            jornada.
          </p>
        </div>
        <div class="field">
          <label for="rest-start">Inicio del descanso</label>
          <input type="datetime-local" id="rest-start" name="rest-start" />
          <p class="hint">
            Obligatorio únicamente cuando exista descanso. Debe ubicarse dentro del
            intervalo de la jornada.
          </p>
        </div>
        <div class="field">
          <label for="rest-end">Fin del descanso (opcional)</label>
          <input type="datetime-local" id="rest-end" name="rest-end" />
          <p class="hint">
            Si se omite, se asumirá que el descanso termina tras consumir los minutos
            indicados a partir de la hora de inicio.
          </p>
        </div>
        <div class="actions">
          <button type="submit">Añadir jornada</button>
          <button type="button" id="reset">Limpiar listado</button>
        </div>
        <p class="errors" id="form-errors" role="alert" aria-live="polite"></p>
      </form>
    </section>

    <section class="results" aria-labelledby="results-title">
      <h2 id="results-title">Resultados acumulados</h2>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Persona</th>
              <th>Semana</th>
              <th>Día</th>
              <th>RN (h)</th>
              <th>HED (h)</th>
              <th>HEDF (h)</th>
              <th>HEN (h)</th>
              <th>Total (h)</th>
            </tr>
          </thead>
          <tbody id="results-body">
            <tr>
              <td colspan="8" class="empty">No hay jornadas para los filtros seleccionados.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <aside class="summary" aria-labelledby="summary-title">
      <h2 id="summary-title">Resumen de horas acumuladas</h2>
      <div class="filters" aria-label="Filtros de resumen">
        <label for="person-filter">Persona</label>
        <select id="person-filter">
          <option value="">Todas las personas</option>
        </select>
        <label for="week-filter">Semana</label>
        <select id="week-filter">
          <option value="">Todas las semanas</option>
        </select>
      </div>
      <dl>
        <div>
          <dt>Total RN</dt>
          <dd><span id="total-rn">0</span> h</dd>
        </div>
        <div>
          <dt>Total HED</dt>
          <dd><span id="total-hed">0</span> h</dd>
        </div>
        <div>
          <dt>Total HEDF</dt>
          <dd><span id="total-hedf">0</span> h</dd>
        </div>
        <div>
          <dt>Total HEN</dt>
          <dd><span id="total-hen">0</span> h</dd>
        </div>
        <div class="highlight">
          <dt>Total de horas registradas</dt>
          <dd><span id="total-hours">0</span> h</dd>
        </div>
      </dl>
    </aside>
  </main>

  <footer>
    <p>Prepare pruebas manuales con escenarios como domingo 19:00 a lunes 05:00 o viernes 18:00 a sábado 05:00 para validar los cálculos.</p>
  </footer>

  <script src="app.js"></script>
</body>
</html>
